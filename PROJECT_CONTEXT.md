# Hotel PMS - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è Claude Opus

## üìã –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**Hotel Property Management System (PMS)** - –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–µ–ª–µ–º, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Å—Ç–µ–∫–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏, –∫–∞–ª–µ–Ω–¥–∞—Ä—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏, —á–∞—Ç —Å –≥–æ—Å—Ç—è–º–∏, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∫–∞–Ω–∞–ª–∞–º–∏ –ø—Ä–æ–¥–∞–∂ –∏ –ø–æ–ª–Ω—É—é —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å.

## üÜï MCP (Model Context Protocol) Integration 

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ MCP
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ù–ê–°–¢–†–û–ï–ù–û (29 –∞–≤–≥—É—Å—Ç–∞ 2025)

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MCP
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª**: `C:\Users\{username}\AppData\Roaming\Claude\claude_desktop_config.json`
- **MCP —Å–µ—Ä–≤–µ—Ä**: `@henkey/postgres-mcp-server` v1.0.5
- **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**: PostgreSQL —á–µ—Ä–µ–∑ Supabase (db.zbhvwxpvlxqxadqzshfc.supabase.co:5432)

#### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ MCP
Claude AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç –Ω–∞–ø—Ä—è–º—É—é:
- ‚úÖ –ß–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- ‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å/–æ–±–Ω–æ–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å –∑–∞–ø–∏—Å–∏
- ‚úÖ –ò–∑–º–µ–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü (ALTER TABLE)
- ‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∏ –∏–Ω–¥–µ–∫—Å—ã
- ‚úÖ –£–ø—Ä–∞–≤–ª—è—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏
- ‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ –í—ã–ø–æ–ª–Ω—è—Ç—å —Å–ª–æ–∂–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã

#### –¢–µ–∫—É—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ë–î
- **–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è**: 80 –∑–∞–ø–∏—Å–µ–π
- **–ì–æ—Å—Ç–∏**: 39 –∑–∞–ø–∏—Å–µ–π
- **–ù–æ–º–µ—Ä–∞**: 4 –∑–∞–ø–∏—Å–∏
- **–£—Å–ª—É–≥–∏**: 8 –∑–∞–ø–∏—Å–µ–π
- **–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏**: 50 –∑–∞–ø–∏—Å–µ–π
- **–ß–∞—Ç-–¥–∏–∞–ª–æ–≥–∏**: 11 –∑–∞–ø–∏—Å–µ–π
- **–°–æ–æ–±—â–µ–Ω–∏—è**: 57 –∑–∞–ø–∏—Å–µ–π

## üèóÔ∏è –ü–æ–ª–Ω—ã–π —Å—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

### Frontend Stack
- **React 18.2** - –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å hooks –∏ functional components
- **TypeScript/JavaScript** - —Å–º–µ—à–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (.tsx –¥–ª—è main.tsx, .jsx –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö)
- **Vite 6.3.5** - –±—ã—Å—Ç—Ä—ã–π —Å–±–æ—Ä—â–∏–∫ –∏ dev server —Å HMR
- **Tailwind CSS 3.4** - utility-first CSS —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **shadcn/ui** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Radix UI** - –ø—Ä–∏–º–∏—Ç–∏–≤—ã –¥–ª—è –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **React Router 6** - –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- **i18next** - –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è (—Ä—É—Å—Å–∫–∏–π/–∞–Ω–≥–ª–∏–π—Å–∫–∏–π)
- **date-fns** - —Ä–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏ –∏ –≤—Ä–µ–º–µ–Ω–µ–º
- **Lucide React** - –∏–∫–æ–Ω–∫–∏
- **Recharts** - –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã
- **React Hook Form** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞–º–∏
- **Zod** - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º –¥–∞–Ω–Ω—ã—Ö

### Backend & Database
- **Supabase** - Backend-as-a-Service –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞
- **PostgreSQL 15** - –æ—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –ë–î
- **Row Level Security (RLS)** - –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä–æ–∫
- **Supabase Realtime** - WebSocket –ø–æ–¥–ø–∏—Å–∫–∏ –¥–ª—è live –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- **Supabase Auth** - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- **Supabase Storage** - —Ñ–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- **RPC Functions** - —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### –î–µ–ø–ª–æ–π –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **Vercel** - —Ö–æ—Å—Ç–∏–Ω–≥ frontend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Vercel Serverless Functions** - API endpoints
- **GitHub** - —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π
- **npm** - –ø–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- **Channex API** - –∫–∞–Ω–∞–ª-–º–µ–Ω–µ–¥–∂–µ—Ä (–ü–û–õ–ù–û–°–¢–¨–Æ –ù–ê–°–¢–†–û–ï–ù ‚úÖ)
- **Base44 SDK** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞–º–∏ (WhatsApp, Telegram)
- **Google OAuth** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **Playwright** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **ESLint** - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
- **Prettier** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- **Vitest** - —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **PostCSS** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ CSS
- **Autoprefixer** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã CSS

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

#### üè® Rooms (–ù–æ–º–µ—Ä–∞)
```sql
CREATE TABLE rooms (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  room_number VARCHAR(10) NOT NULL UNIQUE,
  room_type VARCHAR(50) NOT NULL, -- Standard, Deluxe, Suite, Family
  price_per_night DECIMAL(10,2) DEFAULT 100.00,
  max_occupancy INTEGER DEFAULT 2,
  description TEXT,
  amenities JSONB, -- Wi-Fi, AC, TV, Minibar, etc.
  status VARCHAR(20) DEFAULT 'available', -- available, occupied, maintenance
  floor INTEGER,
  area_sqm DECIMAL(5,2),
  channex_room_type_id VARCHAR(50), -- –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Channex
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

#### üë§ Guests (–ì–æ—Å—Ç–∏)
```sql
CREATE TABLE guests (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  full_name VARCHAR(200) NOT NULL,
  email VARCHAR(200),
  phone VARCHAR(50),
  nationality VARCHAR(50),
  passport_number VARCHAR(50),
  date_of_birth DATE,
  gender VARCHAR(10),
  address TEXT,
  special_requests TEXT,
  vip_status BOOLEAN DEFAULT FALSE,
  blacklisted BOOLEAN DEFAULT FALSE,
  notes TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

#### üìÖ Bookings (–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)
```sql
CREATE TABLE bookings (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  guest_id UUID REFERENCES guests(id) ON DELETE CASCADE,
  room_id UUID REFERENCES rooms(id) ON DELETE RESTRICT,
  check_in DATE NOT NULL,
  check_out DATE NOT NULL,
  guests_count INTEGER DEFAULT 1,
  status VARCHAR(20) DEFAULT 'pending', -- pending, confirmed, checked_in, checked_out, cancelled
  source VARCHAR(50) DEFAULT 'direct', -- direct, booking, airbnb, channex, etc.
  
  -- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–ª—è
  accommodation_total DECIMAL(10,2) NOT NULL,
  services_total DECIMAL(10,2) DEFAULT 0.00,
  total_amount DECIMAL(10,2) NOT NULL,
  amount_paid DECIMAL(10,2) DEFAULT 0.00,
  currency VARCHAR(3) DEFAULT 'USD',
  
  -- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
  notes TEXT,
  special_requests TEXT,
  arrival_time TIME,
  departure_time TIME,
  
  -- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
  channex_reservation_id VARCHAR(100),
  external_booking_id VARCHAR(100),
  
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  
  -- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
  CONSTRAINT valid_dates CHECK (check_out > check_in),
  CONSTRAINT valid_amount CHECK (total_amount >= 0),
  CONSTRAINT valid_guests CHECK (guests_count > 0)
);
```

#### üõéÔ∏è Services (–£—Å–ª—É–≥–∏)
```sql
CREATE TABLE services (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(200) NOT NULL,
  description TEXT,
  category VARCHAR(50) NOT NULL, -- food, spa, cleaning, transport, amenities
  price DECIMAL(10,2) NOT NULL,
  currency VARCHAR(3) DEFAULT 'USD',
  unit VARCHAR(20) DEFAULT 'item', -- item, hour, day, person
  is_active BOOLEAN DEFAULT TRUE,
  requires_advance_booking BOOLEAN DEFAULT FALSE,
  max_quantity INTEGER,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

#### üîó Booking_Services (–°–≤—è–∑—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –∏ —É—Å–ª—É–≥)
```sql
CREATE TABLE booking_services (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  booking_id UUID REFERENCES bookings(id) ON DELETE CASCADE,
  service_id UUID REFERENCES services(id) ON DELETE RESTRICT,
  quantity INTEGER DEFAULT 1,
  price_at_booking DECIMAL(10,2) NOT NULL, -- —Ñ–∏–∫—Å–∏—Ä—É–µ–º —Ü–µ–Ω—É –Ω–∞ –º–æ–º–µ–Ω—Ç –∑–∞–∫–∞–∑–∞
  total_price DECIMAL(10,2) GENERATED ALWAYS AS (quantity * price_at_booking) STORED,
  notes TEXT,
  scheduled_datetime TIMESTAMPTZ, -- –∫–æ–≥–¥–∞ —É—Å–ª—É–≥–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ–∫–∞–∑–∞–Ω–∞
  status VARCHAR(20) DEFAULT 'ordered', -- ordered, in_progress, completed, cancelled
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

#### üí¨ Chat —Å–∏—Å—Ç–µ–º–∞
```sql
CREATE TABLE conversations (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  guest_id UUID REFERENCES guests(id),
  channel VARCHAR(50) NOT NULL, -- whatsapp, telegram, email, internal
  external_id VARCHAR(200), -- ID –≤ –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º–µ
  title VARCHAR(200),
  status VARCHAR(20) DEFAULT 'active', -- active, archived, blocked
  last_message_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE messages (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  conversation_id UUID REFERENCES conversations(id) ON DELETE CASCADE,
  sender_type VARCHAR(20) NOT NULL, -- guest, staff, system
  sender_name VARCHAR(200),
  content TEXT NOT NULL,
  message_type VARCHAR(20) DEFAULT 'text', -- text, image, file, system
  metadata JSONB, -- —Ñ–∞–π–ª—ã, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –∏ —Ç.–¥.
  is_read BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

#### üìä –û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å
```sql
CREATE TABLE daily_reports (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  report_date DATE NOT NULL UNIQUE,
  income_data JSONB, -- —Ä—É—á–Ω—ã–µ –¥–æ—Ö–æ–¥—ã
  expenses_data JSONB, -- —Ä—É—á–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã
  auto_data JSONB, -- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE daily_reports_history (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  report_id UUID REFERENCES daily_reports(id) ON DELETE CASCADE,
  action VARCHAR(20) NOT NULL, -- create, update, delete
  old_data JSONB,
  new_data JSONB,
  changed_at TIMESTAMPTZ DEFAULT NOW(),
  changed_by UUID -- –±—É–¥—É—â–∞—è —Å–≤—è–∑—å —Å —Ç–∞–±–ª–∏—Ü–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
);
```

### –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```sql
-- –û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
CREATE INDEX idx_bookings_dates ON bookings(check_in, check_out);
CREATE INDEX idx_bookings_room_id ON bookings(room_id);
CREATE INDEX idx_bookings_guest_id ON bookings(guest_id);
CREATE INDEX idx_bookings_status ON bookings(status);
CREATE INDEX idx_bookings_source ON bookings(source);
CREATE INDEX idx_messages_conversation ON messages(conversation_id, created_at DESC);
CREATE INDEX idx_guests_email ON guests(email);
CREATE INDEX idx_guests_phone ON guests(phone);
```

### RLS (Row Level Security) –ü–æ–ª–∏—Ç–∏–∫–∏
```sql
-- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (—Ä–∞–∑—Ä–µ—à–∞—é—Ç –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏)
CREATE POLICY "Enable all for guests" ON guests FOR ALL USING (true);
CREATE POLICY "Enable all for bookings" ON bookings FOR ALL USING (true);
CREATE POLICY "Enable all for rooms" ON rooms FOR ALL USING (true);
CREATE POLICY "Enable all for services" ON services FOR ALL USING (true);

-- –í–∫–ª—é—á–∞–µ–º RLS –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
ALTER TABLE guests ENABLE ROW LEVEL SECURITY;
ALTER TABLE bookings ENABLE ROW LEVEL SECURITY;
ALTER TABLE rooms ENABLE ROW LEVEL SECURITY;
ALTER TABLE services ENABLE ROW LEVEL SECURITY;
```

## üîå API Endpoints –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Supabase RPC Functions
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏:

#### üìã create_booking_with_guest
```sql
CREATE OR REPLACE FUNCTION create_booking_with_guest(
  guest_details JSONB,
  room_id_arg UUID,
  check_in_arg DATE,
  check_out_arg DATE,
  status_arg VARCHAR DEFAULT 'pending',
  source_arg VARCHAR DEFAULT 'direct',
  guests_count_arg INTEGER DEFAULT 1,
  notes_arg TEXT DEFAULT NULL,
  amount_paid_arg DECIMAL DEFAULT 0.00,
  accommodation_total_arg DECIMAL,
  services_total_arg DECIMAL DEFAULT 0.00,
  total_amount_arg DECIMAL
) RETURNS UUID
```
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê—Ç–æ–º–∞—Ä–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –≥–æ—Å—Ç—è –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

#### üõéÔ∏è add_services_to_booking  
```sql
CREATE OR REPLACE FUNCTION add_services_to_booking(
  booking_id_arg UUID,
  services_data JSONB
) RETURNS JSONB
```
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—é

### REST API —á–µ—Ä–µ–∑ Supabase
**Base URL**: `https://zbhvwxpvlxqxrnqrbtko.supabase.co/rest/v1/`

#### –û—Å–Ω–æ–≤–Ω—ã–µ endpoints:
```http
# –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
GET    /bookings              # –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
POST   /bookings              # –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
PATCH  /bookings?id=eq.{id}   # –û–±–Ω–æ–≤–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
DELETE /bookings?id=eq.{id}   # –£–¥–∞–ª–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

# –ì–æ—Å—Ç–∏
GET    /guests                # –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –≥–æ—Å—Ç–µ–π
POST   /guests                # –°–æ–∑–¥–∞—Ç—å –≥–æ—Å—Ç—è
PATCH  /guests?id=eq.{id}     # –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≥–æ—Å—Ç—è

# –ù–æ–º–µ—Ä–∞
GET    /rooms                 # –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –Ω–æ–º–µ—Ä–∞
PATCH  /rooms?id=eq.{id}      # –û–±–Ω–æ–≤–∏—Ç—å –Ω–æ–º–µ—Ä

# –£—Å–ª—É–≥–∏
GET    /services              # –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —É—Å–ª—É–≥–∏
POST   /services              # –°–æ–∑–¥–∞—Ç—å —É—Å–ª—É–≥—É

# RPC –≤—ã–∑–æ–≤—ã
POST   /rpc/create_booking_with_guest
POST   /rpc/add_services_to_booking
```

### –í–Ω–µ—à–Ω–∏–µ API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

#### Channex API
**Base URL**: `https://staging.channex.io/api/v1/`
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: Bearer Token

```http
# –û—Å–Ω–æ–≤–Ω—ã–µ endpoints
GET    /properties/{property_id}/bookings    # –ü–æ–ª—É—á–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
POST   /bookings                            # –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
GET    /properties/{property_id}/rate_plans # –ü–æ–ª—É—á–∏—Ç—å —Ç–∞—Ä–∏—Ñ—ã
POST   /properties/{property_id}/rates      # –û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—ã
GET    /properties/{property_id}/room_types # –ü–æ–ª—É—á–∏—Ç—å —Ç–∏–ø—ã –Ω–æ–º–µ—Ä–æ–≤
```

#### Webhook endpoints (Vercel Functions)
```http
POST   /api/channex/webhook    # –û–±—Ä–∞–±–æ—Ç–∫–∞ Channex webhooks
POST   /api/base44/webhook     # –û–±—Ä–∞–±–æ—Ç–∫–∞ Base44 webhooks
```

## üß† –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ –∫–ª—é—á–µ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã

### üè® –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏

#### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
1. **Pending** ‚Üí **Confirmed** ‚Üí **Checked In** ‚Üí **Checked Out**
2. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã: **Cancelled** –Ω–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Channex –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏

#### –í–∞–ª–∏–¥–∞—Ü–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –Ω–æ–º–µ—Ä–∞
const validateRoomAvailability = (roomId, checkIn, checkOut, excludeBookingId) => {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –¥–∞—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏
  // –ò—Å–∫–ª—é—á–∞–µ–º cancelled —Å—Ç–∞—Ç—É—Å—ã
  // –£—á–∏—Ç—ã–≤–∞–µ–º –≤—Ä–µ–º—è check-in/check-out (11:00 - 14:00)
};

// –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏
const calculateBookingTotal = (roomId, checkIn, checkOut, services) => {
  const nightsCount = differenceInDays(checkOut, checkIn);
  const accommodationTotal = nightsCount * room.price_per_night;
  const servicesTotal = services.reduce((sum, service) => 
    sum + (service.price * service.quantity), 0
  );
  return accommodationTotal + servicesTotal;
};
```

### üí∞ –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- **accommodation_total**: —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è
- **services_total**: —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å–ª—É–≥
- **total_amount**: –æ–±—â–∞—è —Å—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ
- **amount_paid**: —É–∂–µ –æ–ø–ª–∞—á–µ–Ω–Ω–∞—è —Å—É–º–º–∞
- **balance_due**: –æ—Å—Ç–∞—Ç–æ–∫ –∫ –¥–æ–ø–ª–∞—Ç–µ (total_amount - amount_paid)

#### –í–∞–ª—é—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- **–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –≤–∞–ª—é—Ç–∞**: USD (–¥–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤)
- **Channex –≤–∞–ª—é—Ç–∞**: GBP (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è API)
- **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**: –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —è–∑—ã–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### üîÑ Realtime —Å–∏—Å—Ç–µ–º–∞

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ live –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
```javascript
// Dashboard.jsx - –æ—Å–Ω–æ–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞
const bookingsSubscription = supabase
  .channel('bookings_changes')
  .on('postgres_changes', {
    event: '*', // INSERT, UPDATE, DELETE
    schema: 'public',
    table: 'bookings'
  }, (payload) => {
    console.log('üîî –ü–æ–ª—É—á–µ–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ:', payload);
    // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    fetchDataForRange(monthStart, monthEnd);
  })
  .subscribe();
```

#### Fallback —Å–∏—Å—Ç–µ–º–∞
```javascript
// –ï—Å–ª–∏ Realtime –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
const handleBookingSaved = useCallback(() => {
  // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
  setShowNewBookingModal(false);
  
  // –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
  const monthStart = startOfMonth(currentMonth);
  const monthEnd = endOfMonth(currentMonth);
  fetchDataForRange(monthStart, monthEnd);
}, [currentMonth, fetchDataForRange]);
```

### üîó –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

#### Channex Integration Pipeline
1. **–°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ PMS**
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** (—á–µ—Ä–µ–∑ setTimeout)
3. **–ú–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö** –ø–æ–¥ —Ñ–æ—Ä–º–∞—Ç Channex API
4. **–û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Channex** —á–µ—Ä–µ–∑ ChannexService
5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞** –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ Webhook —Å–æ–±—ã—Ç–∏–π
```javascript
// api/channex/webhook.js
export default async function handler(req, res) {
  const webhookData = req.body;
  
  // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
  await logWebhookToDatabase(webhookData);
  
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ ChannexService
  const { default: channexService } = await import('../../src/services/channex/ChannexService.jsx');
  const result = await channexService.handleWebhook(webhookData);
  
  res.status(200).json({ status: 'processed', result });
}
```

## üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –¢—Ä–µ—Ö–ø–∞–Ω–µ–ª—å–Ω–∞—è –∫–æ–º–ø–æ–Ω–æ–≤–∫–∞
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—É—é —Ç—Ä–µ—Ö–ø–∞–Ω–µ–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
1. **–õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å (250px)**: –ß–∞—Ç-—Å–∞–π–¥–±–∞—Ä —Å —Å–ø–∏—Å–∫–æ–º –¥–∏–∞–ª–æ–≥–æ–≤
2. **–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å (flex-1)**: –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç (–∫–∞–ª–µ–Ω–¥–∞—Ä—å, —Ç–∞–±–ª–∏—Ü—ã, —Ñ–æ—Ä–º—ã)
3. **–ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å (400px)**: –ß–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ /chat)

### –°–∏—Å—Ç–µ–º–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
**–û—Å–Ω–æ–≤–Ω–æ–π —Ä–æ—É—Ç–µ—Ä**: `src/pages/index.jsx`
```javascript
// –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
const getCurrentPage = (pathname) => {
  if (pathname === '/') return 'dashboard';
  if (pathname.startsWith('/chat')) return 'chat';
  return pathname.slice(1);
};

// –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
const protectedRoutes = [
  { path: '/', element: <Dashboard /> },
  { path: '/bookings', element: <BookingsTable /> },
  { path: '/chat', element: <Chat /> },
  { path: '/statistics/arrivals', element: <ArrivalsPage /> },
  { path: '/statistics/departures', element: <DeparturesPage /> },
  // ... –¥—Ä—É–≥–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã
];
```

### –°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
**AuthProvider**: `src/components/auth/AuthProvider.jsx`
- –û–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –≤—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –£–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Supabase
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç email/password + Google OAuth
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üéØ –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### 1. üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π (Dashboard) - –ì–õ–ê–í–ù–ê–Ø –§–ò–ß–ê
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `src/pages/Dashboard.jsx` + `src/components/dashboard/BookingGrid.jsx`

#### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Å–µ—Ç–∫–∞**: drag-to-select –¥–ª—è –≤—ã–±–æ—Ä–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –¥–∞—Ç
- **Realtime –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω**: –∫–ª–∏–∫ –ø–æ —è—á–µ–π–∫–µ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É
- **Popover –¥–µ—Ç–∞–ª–∏**: –Ω–∞–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- **–¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤**: –∑–µ–ª–µ–Ω—ã–π (confirmed), –∂–µ–ª—Ç—ã–π (pending), –∫—Ä–∞—Å–Ω—ã–π (cancelled)
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤**: –∏–∫–æ–Ω–∫–∏ Booking.com, Airbnb, Direct booking
- **–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**: —Å—Ç–æ–∏–º–æ—Å—Ç—å, –æ–ø–ª–∞—á–µ–Ω–æ, –∫ –¥–æ–ø–ª–∞—Ç–µ

#### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:
```javascript
// –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–µ—Ç–∫–∏
const getBookingsForRoomAndDate = (roomId, date) => {
  return bookings.filter(booking => {
    if (booking.status === 'cancelled') return false;
    const checkIn = startOfDay(parseISO(booking.check_in));
    const checkOut = startOfDay(parseISO(booking.check_out));
    const currentDate = startOfDay(date);
    return booking.room_id === roomId && 
           currentDate >= checkIn && 
           currentDate < checkOut;
  });
};

// Drag-to-select —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
const handleMouseDown = (roomId, date) => {
  if (getBookingsForRoomAndDate(roomId, date).length > 0) return;
  setIsDragging(true);
  setStartCell({ roomId, date });
};
```

### 2. üè® –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: `src/components/dashboard/NewBookingModal.jsx`, `src/components/integrations/Supabase.jsx`

#### CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏:
- **Create**: RPC —Ñ—É–Ω–∫—Ü–∏—è `create_booking_with_guest` –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è
- **Read**: –ó–∞–ø—Ä–æ—Å—ã —Å JOIN –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è—Ö
- **Update**: –ß–∞—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **Delete**: –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –Ω–æ–º–µ—Ä–∞
const validateAvailability = async (roomId, checkIn, checkOut, excludeId) => {
  const conflicts = await supabase
    .from('bookings')
    .select('*')
    .eq('room_id', roomId)
    .neq('status', 'cancelled')
    .or(`check_in.lt.${checkOut},check_out.gt.${checkIn}`);
  
  return conflicts.data?.length === 0;
};

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏
const calculateTotals = (room, checkIn, checkOut, services) => {
  const nights = differenceInDays(parseISO(checkOut), parseISO(checkIn));
  const accommodation = nights * room.price_per_night;
  const servicesTotal = services.reduce((sum, s) => sum + s.total, 0);
  return { accommodation, services: servicesTotal, total: accommodation + servicesTotal };
};
```

### 3. üí¨ –ú–Ω–æ–≥–æ–∫–∞–Ω–∞–ª—å–Ω–∞—è —á–∞—Ç-—Å–∏—Å—Ç–µ–º–∞
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: `src/components/chat/` (ChatSidebar, ChatInterface, ChatModal)

#### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–∞–Ω–∞–ª—ã:
- **WhatsApp Business API** —á–µ—Ä–µ–∑ Base44
- **Telegram Bot API** —á–µ—Ä–µ–∑ Base44
- **Email** —á–µ—Ä–µ–∑ Supabase Functions
- **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –¥–ª—è –∑–∞–º–µ—Ç–æ–∫ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —á–∞—Ç–æ–≤:
```javascript
// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ conversation
{
  id: 'uuid',
  guest_id: 'uuid', // —Å–≤—è–∑—å —Å —Ç–∞–±–ª–∏—Ü–µ–π guests
  channel: 'whatsapp|telegram|email|internal',
  external_id: 'phone_number_or_chat_id',
  title: '–ò–º—è –≥–æ—Å—Ç—è –∏–ª–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞',
  last_message_at: 'timestamp',
  unread_count: 0
}

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ message
{
  conversation_id: 'uuid',
  sender_type: 'guest|staff|system',
  content: '—Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è',
  message_type: 'text|image|file|location',
  metadata: { file_url, coordinates, etc. }
}
```

### 4. üè¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–Ω—ã–º —Ñ–æ–Ω–¥–æ–º
**–§–∞–π–ª—ã**: `src/components/dashboard/BookingGrid.jsx`, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `rooms`

#### –¢–∏–ø—ã –Ω–æ–º–µ—Ä–æ–≤ –∏ –∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
```javascript
const roomTypes = {
  'standard': { basePrice: 80, maxOccupancy: 2, amenities: ['WiFi', 'TV'] },
  'deluxe': { basePrice: 120, maxOccupancy: 3, amenities: ['WiFi', 'TV', 'Minibar'] },
  'suite': { basePrice: 200, maxOccupancy: 4, amenities: ['WiFi', 'TV', 'Minibar', 'Balcony'] },
  'family': { basePrice: 150, maxOccupancy: 6, amenities: ['WiFi', 'TV', 'Kitchen'] }
};
```

#### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω–∞–º–∏:
- **Click-to-edit**: –∫–ª–∏–∫ –ø–æ —è—á–µ–π–∫–µ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–Ω—ã
- **Bulk pricing**: –º–∞—Å—Å–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω –Ω–∞ –ø–µ—Ä–∏–æ–¥
- **Seasonal rates**: —Å–µ–∑–æ–Ω–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã —á–µ—Ä–µ–∑ Channex API
- **Channel sync**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –∫–∞–Ω–∞–ª–∞–º–∏ –ø—Ä–æ–¥–∞–∂

### 5. üõéÔ∏è –°–∏—Å—Ç–µ–º–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å–ª—É–≥
**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: —Ç–∞–±–ª–∏—Ü–∞ `services`, —Å–≤—è–∑—å —á–µ—Ä–µ–∑ `booking_services`

#### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥:
```javascript
const serviceCategories = {
  food: { icon: 'üçΩÔ∏è', name: '–ü–∏—Ç–∞–Ω–∏–µ', examples: ['–ó–∞–≤—Ç—Ä–∞–∫', '–£–∂–∏–Ω', 'Room Service'] },
  spa: { icon: 'üíÜ‚Äç‚ôÄÔ∏è', name: '–°–ü–ê', examples: ['–ú–∞—Å—Å–∞–∂', '–°–∞—É–Ω–∞', '–ë–∞—Å—Å–µ–π–Ω'] },
  cleaning: { icon: 'üßπ', name: '–£–±–æ—Ä–∫–∞', examples: ['–î–æ–ø. —É–±–æ—Ä–∫–∞', '–°—Ç–∏—Ä–∫–∞', '–ì–ª–∞–∂–∫–∞'] },
  transport: { icon: 'üöó', name: '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç', examples: ['–¢—Ä–∞–Ω—Å—Ñ–µ—Ä', '–ü–∞—Ä–∫–æ–≤–∫–∞', '–¢–∞–∫—Å–∏'] },
  amenities: { icon: 'üõèÔ∏è', name: '–£–¥–æ–±—Å—Ç–≤–∞', examples: ['–î–æ–ø. –∫—Ä–æ–≤–∞—Ç—å', '–î–µ—Ç—Å–∫–∞—è –∫—Ä–æ–≤–∞—Ç–∫–∞'] }
};
```

#### Pricing –ª–æ–≥–∏–∫–∞:
```javascript
// –§–∏–∫—Å–∞—Ü–∏—è —Ü–µ–Ω—ã –Ω–∞ –º–æ–º–µ–Ω—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
const addServiceToBooking = async (bookingId, serviceId, quantity) => {
  const service = await getService(serviceId);
  const totalPrice = service.price * quantity;
  
  await supabase.from('booking_services').insert({
    booking_id: bookingId,
    service_id: serviceId,
    quantity,
    price_at_booking: service.price, // –§–∏–∫—Å–∏—Ä—É–µ–º —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É
    total_price: totalPrice
  });
};
```

## üè¢ –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –§–∞–π–ª–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ ui/                    # shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ button.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ card.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ input.jsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...                # 30+ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ auth/                  # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthProvider.jsx   # –ì–ª–∞–≤–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ LoginForm.jsx      # –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/             # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BookingGrid.jsx    # üî• –ì–õ–ê–í–ù–´–ô –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–æ–π —Å–µ—Ç–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BookingPopover.jsx # –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NewBookingModal.jsx# –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –±—Ä–æ–Ω–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DashboardStatistics.jsx # –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –≤–∏–¥–∂–µ—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ReportsModal.jsx   # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ chat/                  # –ß–∞—Ç-—Å–∏—Å—Ç–µ–º–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatSidebar.jsx    # –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –¥–∏–∞–ª–æ–≥–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatInterface.jsx  # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–µ—Ä–µ–ø–∏—Å–∫–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ChatModal.jsx      # –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —á–∞—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ channex/               # Channex –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChannelManager.jsx # UI —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–Ω–∞–ª–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChannexSyncManager.jsx # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ChannexBookingManager.jsx # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–æ–Ω—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ integrations/          # –í–Ω–µ—à–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Supabase.jsx       # üî• –í–°–ï database –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Base44Client.jsx   # –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä—ã (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ)
‚îÇ   ‚îî‚îÄ‚îÄ common/                # –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ LanguageSwitcher.jsx # –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ SourceIcon.jsx     # –ò–∫–æ–Ω–∫–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
‚îÇ       ‚îî‚îÄ‚îÄ LoadingSpinner.jsx # –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏
‚îú‚îÄ‚îÄ pages/                     # –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îú‚îÄ‚îÄ index.jsx              # üî• –ì–ª–∞–≤–Ω—ã–π —Ä–æ—É—Ç–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ Layout.jsx             # –û–±—â–∏–π –ª–µ–π–∞—É—Ç —Å –ø–∞–Ω–µ–ª—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ Dashboard.jsx          # üî• –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º
‚îÇ   ‚îú‚îÄ‚îÄ Bookings.jsx           # –¢–∞–±–ª–∏—á–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –±—Ä–æ–Ω–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ Chat.jsx               # –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —á–∞—Ç
‚îÇ   ‚îú‚îÄ‚îÄ statistics/            # –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Arrivals.jsx       # –ó–∞–µ–∑–∂–∞—é—â–∏–µ —Å–µ–≥–æ–¥–Ω—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Departures.jsx     # –í—ã–µ–∑–∂–∞—é—â–∏–µ —Å–µ–≥–æ–¥–Ω—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CurrentStays.jsx   # –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–∂–∏–≤–∞—é—â–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Birthdays.jsx      # –î–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è –≥–æ—Å—Ç–µ–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Tasks.jsx          # –ó–∞–¥–∞—á–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞
‚îÇ   ‚îî‚îÄ‚îÄ integrations/          # –°—Ç—Ä–∞–Ω–∏—Ü—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
‚îÇ       ‚îî‚îÄ‚îÄ Channels.jsx       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞–º–∏ –ø—Ä–æ–¥–∞–∂
‚îú‚îÄ‚îÄ services/                  # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ API
‚îÇ   ‚îú‚îÄ‚îÄ channex/               # üî• Channex –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–¢–ê–ï–¢)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChannexService.jsx # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BookingSync.js     # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –±—Ä–æ–Ω–µ–π (legacy)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WebhookHandler.js  # –û–±—Ä–∞–±–æ—Ç–∫–∞ webhook —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ airbnb/                # Airbnb –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
‚îÇ       ‚îî‚îÄ‚îÄ AirbnbChannexService.jsx
‚îú‚îÄ‚îÄ hooks/                     # –ö–∞—Å—Ç–æ–º–Ω—ã–µ React —Ö—É–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ useTranslation.js      # üî• –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è i18n —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ useAuth.js             # –•—É–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ useRealtime.js         # –•—É–∫ –¥–ª—è Realtime –ø–æ–¥–ø–∏—Å–æ–∫
‚îú‚îÄ‚îÄ lib/                       # –£—Ç–∏–ª–∏—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ supabase.js            # üî• –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Supabase –∫–ª–∏–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ i18n.js                # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ utils.js               # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îî‚îÄ‚îÄ api/                       # Serverless —Ñ—É–Ω–∫—Ü–∏–∏ (Vercel)
    ‚îî‚îÄ‚îÄ channex/
        ‚îî‚îÄ‚îÄ webhook.js         # üî• Webhook endpoint –¥–ª—è Channex

# –ö–æ—Ä–Ω–µ–≤—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ tailwind.config.js         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Tailwind CSS
‚îú‚îÄ‚îÄ vite.config.js             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vite
‚îú‚îÄ‚îÄ eslint.config.js           # –ü—Ä–∞–≤–∏–ª–∞ ESLint
‚îú‚îÄ‚îÄ package.json               # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã
‚îî‚îÄ‚îÄ PROJECT_CONTEXT.md         # üî• –≠–¢–û–¢ —Ñ–∞–π–ª - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

### –ö–ª—é—á–µ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (package.json)
```json
{
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^6.8.0",
    "@supabase/supabase-js": "^2.39.0",
    "@radix-ui/react-*": "–º–Ω–æ–∂–µ—Å—Ç–≤–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤",
    "tailwindcss": "^3.4.0",
    "date-fns": "^2.30.0",
    "i18next": "^23.7.0",
    "react-i18next": "^13.5.0",
    "lucide-react": "^0.263.1",
    "recharts": "^2.8.0",
    "react-hook-form": "^7.47.0",
    "zod": "^3.22.0"
  },
  "devDependencies": {
    "vite": "^6.3.5",
    "@vitejs/plugin-react": "^4.2.0",
    "eslint": "^8.55.0",
    "vitest": "^1.0.0",
    "playwright": "^1.40.0"
  }
}
```

## üîß –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### üîÑ Realtime —Å–∏—Å—Ç–µ–º–∞ (–ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–¢–ê–ï–¢ ‚úÖ)
**–õ–æ–∫–∞—Ü–∏—è**: `src/pages/Dashboard.jsx:118-163`

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Realtime –ø–æ–¥–ø–∏—Å–æ–∫:
```javascript
// –û—Å–Ω–æ–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
useEffect(() => {
  console.log('üîî –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º Realtime –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π');
  
  const bookingsSubscription = supabase
    .channel('bookings_changes')
    .on('postgres_changes', {
      event: '*', // INSERT, UPDATE, DELETE
      schema: 'public',
      table: 'bookings'
    }, (payload) => {
      console.log('üîî –ü–æ–ª—É—á–µ–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü–µ bookings:', payload);
      
      const eventType = payload.eventType;
      const booking = payload.new || payload.old;
      
      if (eventType === 'INSERT') {
        console.log('‚ûï –î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:', booking?.id);
      } else if (eventType === 'UPDATE') {
        console.log('üìù –û–±–Ω–æ–≤–ª–µ–Ω–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:', booking?.id);
      } else if (eventType === 'DELETE') {
        console.log('üóëÔ∏è –£–¥–∞–ª–µ–Ω–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:', booking?.id);
      }
      
      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞
      const monthStart = startOfMonth(currentMonth);
      const monthEnd = endOfMonth(currentMonth);
      fetchDataForRange(monthStart, monthEnd);
    })
    .subscribe((status) => {
      console.log('üì° –°—Ç–∞—Ç—É—Å Realtime –ø–æ–¥–ø–∏—Å–∫–∏:', status);
    });

  // –û—á–∏—Å—Ç–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
  return () => {
    console.log('üîå –û—Ç–∫–ª—é—á–∞–µ–º Realtime –ø–æ–¥–ø–∏—Å–∫—É');
    supabase.removeChannel(bookingsSubscription);
  };
}, [currentMonth, fetchDataForRange]);
```

#### Fallback —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏:
```javascript
// Dashboard.jsx:223-236 - –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–ê–Ø —Ñ—É–Ω–∫—Ü–∏—è
const handleBookingSaved = useCallback(() => {
  console.log('üìù Booking saved - –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ');
  
  // 1. –ó–∞–∫—Ä—ã–≤–∞–µ–º UI —ç–ª–µ–º–µ–Ω—Ç—ã
  setShowNewBookingModal(false);
  setSelectedCell(null);
  setEditingBooking(null);
  
  // 2. –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û–ï –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (fallback –µ—Å–ª–∏ Realtime –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
  console.log('üîÑ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è');
  const monthStart = startOfMonth(currentMonth);
  const monthEnd = endOfMonth(currentMonth);
  fetchDataForRange(monthStart, monthEnd);
}, [currentMonth, fetchDataForRange]);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°–∏—Å—Ç–µ–º–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–∞–∂–µ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º

### üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î - –î–µ—Ç–∞–ª—å–Ω—ã–µ —Å—Ö–µ–º—ã

#### –ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ `bookings` —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏:
```sql
CREATE TABLE bookings (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  guest_id UUID NOT NULL REFERENCES guests(id) ON DELETE CASCADE,
  room_id UUID NOT NULL REFERENCES rooms(id) ON DELETE RESTRICT,
  check_in DATE NOT NULL,
  check_out DATE NOT NULL,
  guests_count INTEGER DEFAULT 1 CHECK (guests_count > 0),
  status booking_status DEFAULT 'pending',
  source VARCHAR(50) DEFAULT 'direct',
  
  -- –§–∏–Ω–∞–Ω—Å—ã (–≤—Å–µ –≤ USD –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Ä–∞—Å—á–µ—Ç–æ–≤)
  accommodation_total DECIMAL(10,2) NOT NULL CHECK (accommodation_total >= 0),
  services_total DECIMAL(10,2) DEFAULT 0.00 CHECK (services_total >= 0),
  total_amount DECIMAL(10,2) GENERATED ALWAYS AS (accommodation_total + services_total) STORED,
  amount_paid DECIMAL(10,2) DEFAULT 0.00 CHECK (amount_paid >= 0),
  balance_due DECIMAL(10,2) GENERATED ALWAYS AS (accommodation_total + services_total - amount_paid) STORED,
  currency VARCHAR(3) DEFAULT 'USD',
  
  -- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  notes TEXT,
  special_requests TEXT,
  arrival_time TIME DEFAULT '14:00', -- —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –≤—Ä–µ–º—è –∑–∞–µ–∑–¥–∞
  departure_time TIME DEFAULT '11:00', -- —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –≤—Ä–µ–º—è –≤—ã–µ–∑–¥–∞
  
  -- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
  channex_reservation_id VARCHAR(100) UNIQUE,
  channex_booking_id VARCHAR(100),
  airbnb_confirmation_code VARCHAR(100),
  booking_com_id VARCHAR(100),
  external_booking_id VARCHAR(100),
  
  -- –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–æ–ª—è
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  created_by UUID, -- —Å–≤—è–∑—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (–±—É–¥—É—â–µ–µ)
  updated_by UUID,
  
  -- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
  CONSTRAINT valid_dates CHECK (check_out > check_in),
  CONSTRAINT valid_stay_duration CHECK (check_out - check_in <= INTERVAL '365 days'), -- –º–∞–∫—Å–∏–º—É–º –≥–æ–¥
  CONSTRAINT valid_payment CHECK (amount_paid <= (accommodation_total + services_total))
);

-- –°–æ–∑–¥–∞–µ–º ENUM –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤
CREATE TYPE booking_status AS ENUM (
  'pending',      -- –û–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
  'confirmed',    -- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω
  'checked_in',   -- –ó–∞—Å–µ–ª–µ–Ω
  'checked_out',  -- –í—ã—Å–µ–ª–µ–Ω
  'cancelled',    -- –û—Ç–º–µ–Ω–µ–Ω
  'no_show'       -- –ù–µ –ø—Ä–∏–µ—Ö–∞–ª
);

-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
CREATE INDEX CONCURRENTLY idx_bookings_date_range ON bookings (check_in, check_out);
CREATE INDEX CONCURRENTLY idx_bookings_room_date ON bookings (room_id, check_in, check_out);
CREATE INDEX CONCURRENTLY idx_bookings_guest ON bookings (guest_id);
CREATE INDEX CONCURRENTLY idx_bookings_status_active ON bookings (status) WHERE status NOT IN ('cancelled', 'no_show');
CREATE INDEX CONCURRENTLY idx_bookings_source ON bookings (source);
CREATE INDEX CONCURRENTLY idx_bookings_created_at ON bookings (created_at DESC);
CREATE INDEX CONCURRENTLY idx_bookings_channex ON bookings (channex_reservation_id) WHERE channex_reservation_id IS NOT NULL;

-- –¢—Ä–∏–≥–≥–µ—Ä –¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è updated_at
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ language 'plpgsql';

CREATE TRIGGER update_bookings_updated_at BEFORE UPDATE ON bookings
FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
```

#### –ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ `guests` —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏:
```sql
CREATE TABLE guests (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  
  -- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  full_name VARCHAR(200) NOT NULL CHECK (length(trim(full_name)) >= 2),
  first_name VARCHAR(100) GENERATED ALWAYS AS (split_part(full_name, ' ', 1)) STORED,
  last_name VARCHAR(100) GENERATED ALWAYS AS (
    CASE WHEN position(' ' in full_name) > 0 
    THEN substring(full_name from position(' ' in full_name) + 1)
    ELSE '' END
  ) STORED,
  
  -- –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  email VARCHAR(200) CHECK (email ~* '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$'),
  phone VARCHAR(50) CHECK (length(trim(phone)) >= 7),
  secondary_phone VARCHAR(50),
  
  -- –õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  nationality VARCHAR(50) DEFAULT 'Unknown',
  passport_number VARCHAR(50),
  passport_expiry DATE,
  date_of_birth DATE CHECK (date_of_birth < CURRENT_DATE),
  gender VARCHAR(10) CHECK (gender IN ('male', 'female', 'other', 'prefer_not_to_say')),
  
  -- –ê–¥—Ä–µ—Å
  address TEXT,
  city VARCHAR(100),
  country VARCHAR(100) DEFAULT 'Unknown',
  postal_code VARCHAR(20),
  
  -- –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
  dietary_restrictions TEXT,
  special_requests TEXT,
  language_preference VARCHAR(10) DEFAULT 'en',
  preferred_room_type VARCHAR(50),
  
  -- –°—Ç–∞—Ç—É—Å—ã –∏ –º–µ—Ç–∫–∏
  vip_status BOOLEAN DEFAULT FALSE,
  blacklisted BOOLEAN DEFAULT FALSE,
  email_marketing_consent BOOLEAN DEFAULT FALSE,
  sms_marketing_consent BOOLEAN DEFAULT FALSE,
  
  -- –ó–∞–º–µ—Ç–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞
  notes TEXT,
  internal_notes TEXT, -- —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∞
  
  -- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è)
  total_bookings INTEGER DEFAULT 0,
  total_spent DECIMAL(10,2) DEFAULT 0.00,
  last_stay_date DATE,
  
  -- –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–æ–ª—è
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  created_by UUID,
  
  -- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
  CONSTRAINT valid_age CHECK (date_of_birth IS NULL OR date_of_birth > (CURRENT_DATE - INTERVAL '150 years')),
  CONSTRAINT valid_email_phone CHECK (email IS NOT NULL OR phone IS NOT NULL) -- —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∫–æ–Ω—Ç–∞–∫—Ç
);

-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
CREATE INDEX CONCURRENTLY idx_guests_full_name_gin ON guests USING gin(to_tsvector('russian', full_name));
CREATE INDEX CONCURRENTLY idx_guests_email_lower ON guests (lower(email));
CREATE INDEX CONCURRENTLY idx_guests_phone_clean ON guests (regexp_replace(phone, '[^0-9+]', '', 'g'));
CREATE INDEX CONCURRENTLY idx_guests_passport ON guests (passport_number) WHERE passport_number IS NOT NULL;
CREATE INDEX CONCURRENTLY idx_guests_vip ON guests (vip_status) WHERE vip_status = true;
CREATE INDEX CONCURRENTLY idx_guests_blacklist ON guests (blacklisted) WHERE blacklisted = true;

-- –¢—Ä–∏–≥–≥–µ—Ä –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≥–æ—Å—Ç–µ–π
CREATE OR REPLACE FUNCTION update_guest_statistics()
RETURNS TRIGGER AS $$
BEGIN
    IF TG_OP = 'INSERT' OR TG_OP = 'UPDATE' THEN
        UPDATE guests SET 
            total_bookings = (
                SELECT COUNT(*) FROM bookings 
                WHERE guest_id = NEW.guest_id AND status NOT IN ('cancelled', 'no_show')
            ),
            total_spent = (
                SELECT COALESCE(SUM(amount_paid), 0) FROM bookings 
                WHERE guest_id = NEW.guest_id AND status NOT IN ('cancelled', 'no_show')
            ),
            last_stay_date = (
                SELECT MAX(check_out) FROM bookings 
                WHERE guest_id = NEW.guest_id AND status = 'checked_out'
            )
        WHERE id = NEW.guest_id;
    END IF;
    
    RETURN COALESCE(NEW, OLD);
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER update_guest_stats_on_booking_change
AFTER INSERT OR UPDATE OR DELETE ON bookings
FOR EACH ROW EXECUTE FUNCTION update_guest_statistics();
```

#### API Endpoints - –î–µ—Ç–∞–ª—å–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

**üîó Supabase REST API Endpoints:**

##### –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (Bookings)
```http
# –ü–æ–ª—É—á–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞ –ø–µ—Ä–∏–æ–¥ —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
GET /rest/v1/bookings?
    select=*,guests(*),rooms(*),booking_services(quantity,total_price,services(name,price))
    &check_in=lt.2024-12-31
    &check_out=gt.2024-12-01
    &order=created_at.desc
    
# –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
GET /rest/v1/bookings?
    select=*,guests(*),rooms(*),booking_services(*,services(*))
    &id=eq.{booking_uuid}
    
# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (—á–µ—Ä–µ–∑ RPC —Ñ—É–Ω–∫—Ü–∏—é)
POST /rest/v1/rpc/create_booking_with_guest
Content-Type: application/json
{
  "guest_details": {
    "full_name": "John Doe",
    "email": "john@example.com",
    "phone": "+1234567890",
    "nationality": "US"
  },
  "room_id_arg": "uuid",
  "check_in_arg": "2024-12-15",
  "check_out_arg": "2024-12-20",
  "guests_count_arg": 2,
  "accommodation_total_arg": 500.00,
  "services_total_arg": 50.00,
  "status_arg": "confirmed",
  "source_arg": "direct"
}

# –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
PATCH /rest/v1/bookings?id=eq.{uuid}
Content-Type: application/json
{
  "status": "checked_in",
  "notes": "–ó–∞—Å–µ–ª–µ–Ω –≤ 14:30, –∑–∞–ø—Ä–æ—Å–∏–ª —Ä–∞–Ω–Ω—é—é —É–±–æ—Ä–∫—É",
  "arrival_time": "14:30"
}

# –î–æ–±–∞–≤–∏—Ç—å –æ–ø–ª–∞—Ç—É –∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—é
PATCH /rest/v1/bookings?id=eq.{uuid}
{
  "amount_paid": 300.00
}

# –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (–æ—Ç–º–µ–Ω–∞) –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
PATCH /rest/v1/bookings?id=eq.{uuid}
{
  "status": "cancelled",
  "notes": "–û—Ç–º–µ–Ω–µ–Ω–æ –≥–æ—Å—Ç–µ–º –∑–∞ 24 —á–∞—Å–∞, —à—Ç—Ä–∞—Ñ –Ω–µ –≤–∑–∏–º–∞–µ—Ç—Å—è"
}

# –ñ–µ—Å—Ç–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤)
DELETE /rest/v1/bookings?id=eq.{uuid}
```

##### –ì–æ—Å—Ç–∏ (Guests)
```http
# –ü–æ–∏—Å–∫ –≥–æ—Å—Ç–µ–π –ø–æ –∏–º–µ–Ω–∏, email –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω—É
GET /rest/v1/guests?
    or=(full_name.ilike.*{query}*,email.ilike.*{query}*,phone.ilike.*{query}*)
    &order=last_stay_date.desc.nullslast
    &limit=20
    
# –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≥–æ—Å—Ç–µ —Å –∏—Å—Ç–æ—Ä–∏–µ–π –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
GET /rest/v1/guests?
    select=*,bookings(*,rooms(room_number,room_type))
    &id=eq.{guest_uuid}
    
# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –≥–æ—Å—Ç—è
POST /rest/v1/guests
{
  "full_name": "Jane Smith",
  "email": "jane@example.com",
  "phone": "+1987654321",
  "nationality": "UK",
  "date_of_birth": "1985-03-15",
  "special_requests": "Vegetarian meals, high floor room",
  "language_preference": "en"
}

# –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≥–æ—Å—Ç–µ
PATCH /rest/v1/guests?id=eq.{uuid}
{
  "email": "newemail@example.com",
  "vip_status": true,
  "notes": "–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç, –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç –Ω–æ–º–µ—Ä–∞ —Å –≤–∏–¥–æ–º –Ω–∞ –º–æ—Ä–µ"
}

# –ü–æ–ª—É—á–∏—Ç—å VIP –≥–æ—Å—Ç–µ–π
GET /rest/v1/guests?vip_status=eq.true&order=total_spent.desc

# –ü–æ–ª—É—á–∏—Ç—å –≥–æ—Å—Ç–µ–π —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è –≤ —Ç–µ–∫—É—â–µ–º –º–µ—Å—è—Ü–µ
GET /rest/v1/guests?
    date_of_birth=gte.{current_month_start}
    &date_of_birth=lt.{next_month_start}
    &order=date_of_birth.asc
```

##### –ù–æ–º–µ—Ä–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (Rooms)
```http
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –Ω–æ–º–µ—Ä–∞ —Å —Ç–µ–∫—É—â–∏–º —Å—Ç–∞—Ç—É—Å–æ–º
GET /rest/v1/rooms?order=room_number.asc

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –Ω–æ–º–µ—Ä–∞ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞—Ç—ã
GET /rest/v1/bookings?
    room_id=eq.{room_uuid}
    &check_in=lt.{end_date}
    &check_out=gt.{start_date}
    &status=not.in.(cancelled,no_show)
    
# –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –Ω–∞ –ø–µ—Ä–∏–æ–¥
# (–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ RPC —Ñ—É–Ω–∫—Ü–∏—é)
POST /rest/v1/rpc/get_available_rooms
{
  "start_date": "2024-12-15",
  "end_date": "2024-12-20",
  "room_type": "deluxe", // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "max_occupancy": 2 // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}

# –û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—É –Ω–æ–º–µ—Ä–∞
PATCH /rest/v1/rooms?id=eq.{uuid}
{
  "price_per_night": 150.00
}

# –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–æ–º–µ—Ä–∞
PATCH /rest/v1/rooms?id=eq.{uuid}
{
  "status": "maintenance",
  "notes": "–†–µ–º–æ–Ω—Ç –≤–∞–Ω–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã, –¥–æ—Å—Ç—É–ø–µ–Ω —Å 20.12"
}
```

##### –£—Å–ª—É–≥–∏ (Services & Booking Services)
```http
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —É—Å–ª—É–≥–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
GET /rest/v1/services?
    is_active=eq.true
    &order=category.asc,name.asc
    
# –î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥–∏ –∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—é
POST /rest/v1/rpc/add_services_to_booking
{
  "booking_id_arg": "booking_uuid",
  "services_data": [
    {
      "service_id": "service_uuid_1",
      "quantity": 2,
      "scheduled_datetime": "2024-12-16T09:00:00Z"
    },
    {
      "service_id": "service_uuid_2",
      "quantity": 1
    }
  ]
}

# –ü–æ–ª—É—á–∏—Ç—å —É—Å–ª—É–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
GET /rest/v1/booking_services?
    select=*,services(name,category,description)
    &booking_id=eq.{booking_uuid}
    &order=created_at.asc
    
# –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å —É—Å–ª—É–≥–∏
PATCH /rest/v1/booking_services?id=eq.{uuid}
{
  "status": "completed",
  "notes": "–ó–∞–≤—Ç—Ä–∞–∫ –ø–æ–¥–∞–Ω –≤ –Ω–æ–º–µ—Ä –≤ 08:30"
}

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —É—Å–ª—É–≥—É –≤ —Å–∏—Å—Ç–µ–º–µ
POST /rest/v1/services
{
  "name": "–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π —É–∂–∏–Ω",
  "description": "–£–∂–∏–Ω –ø—Ä–∏ —Å–≤–µ—á–∞—Ö –Ω–∞ 2 –ø–µ—Ä—Å–æ–Ω—ã",
  "category": "food",
  "price": 89.99,
  "unit": "item",
  "requires_advance_booking": true
}
```

### üé® –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è UI –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

#### Drag-to-Select –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–æ–π —Å–µ—Ç–∫–µ:
```javascript
// BookingGrid.jsx - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—è
const handleMouseDown = (roomId, date) => {
  if (getBookingsForRoomAndDate(roomId, date).length > 0) return;
  setIsDragging(true);
  setStartCell({ roomId, date });
  setEndCell({ roomId, date });
};

const handleMouseMove = (roomId, date, event) => {
  if (!isDragging || !startCell || roomId !== startCell.roomId) return;
  setEndCell({ roomId, date });
  
  // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π tooltip —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –¥–Ω–µ–π
  const dayCount = differenceInDays(endDate, startDate) + 1;
  const dayText = dayCount === 1 ? '–¥–µ–Ω—å' : (dayCount > 1 && dayCount < 5) ? '–¥–Ω—è' : '–¥–Ω–µ–π';
  setTooltip({ 
    show: true, 
    x: event.clientX + 15, 
    y: event.clientY - 35, 
    text: `${dayCount} ${dayText}` 
  });
};
```

#### –£–º–Ω—ã–π Popover —Å –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º:
```javascript
// BookingPopover.jsx - –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
useEffect(() => {
  const popoverHeight = 400;
  const popoverWidth = 350;
  const margin = 20;

  let x = position.x + 10;
  let y = position.y;

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥—Ä–∞–Ω–∏—Ü—ã —ç–∫—Ä–∞–Ω–∞ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ø–æ–∑–∏—Ü–∏—é
  if (x + popoverWidth > window.innerWidth - margin) {
    x = position.x - popoverWidth - 10; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–µ–≤–∞
  }
  
  if (y - popoverHeight < margin) {
    y = position.y + 10; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–Ω–∏–∑—É
  } else {
    y = position.y - popoverHeight - 10; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–≤–µ—Ä—Ö—É
  }

  setPopoverPosition({ x, y });
}, [position]);
```

### üíæ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ database –æ–ø–µ—Ä–∞—Ü–∏–∏

#### –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å JOIN:
```javascript
// Supabase.jsx:42-56 - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
export const getBookingsForRange = async (startDate, endDate) => {
  const start = format(startDate, 'yyyy-MM-dd');
  const end = format(endDate, 'yyyy-MM-dd');

  return handleSupabaseQuery(
    supabase
      .from('bookings')
      .select(`
        *,
        guests ( * ),                    // JOIN —Å –≥–æ—Å—Ç—è–º–∏
        rooms ( id, room_number, room_type ),  // JOIN —Å –Ω–æ–º–µ—Ä–∞–º–∏
        booking_services ( *, services ( * ) ) // JOIN —Å —É—Å–ª—É–≥–∞–º–∏
      `)
      .lt('check_in', end)      // –î–∞—Ç–∞ –∑–∞–µ–∑–¥–∞ –î–û –∫–æ–Ω—Ü–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
      .gt('check_out', start)   // –î–∞—Ç–∞ –≤—ã–µ–∑–¥–∞ –ü–û–°–õ–ï –Ω–∞—á–∞–ª–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
      .order('created_at', { ascending: false })
  );
};
```

#### –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ RPC:
```javascript
// Supabase.jsx:106-192 - –∞—Ç–æ–º–∞—Ä–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
export const createBooking = async (bookingData) => {
  // 1. –°–æ–∑–¥–∞–µ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ + –≥–æ—Å—Ç—è –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
  const { data, error } = await supabase.rpc('create_booking_with_guest', {
    guest_details: bookingData.guest_details,
    room_id_arg: bookingData.room_id,
    check_in_arg: bookingData.check_in,
    check_out_arg: bookingData.check_out,
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  });

  if (error) throw error;

  // 2. –ê–°–ò–ù–•–†–û–ù–ù–ê–Ø —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Channex (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç UI)
  if (data && bookingData.syncToChannex !== false) {
    setTimeout(async () => {
      try {
        const { default: channexService } = await import('@/services/channex/ChannexService.jsx');
        const result = await channexService.createBookingInChannex(fullBooking);
        console.log('‚úÖ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å Channex!', result);
      } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å Channex:', error);
      }
    }, 1000);
  }

  return data;
};
```

### üîó –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Channex (PRODUCTION READY ‚úÖ)

#### –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π ChannexService:
```javascript
// ChannexService.jsx - –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
class ChannexService {
  constructor() {
    this.apiUrl = 'https://staging.channex.io/api/v1';
    this.propertyId = '6ae9708a-cbaa-4134-bf04-29314e842709';
  }

  // –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Channex
  async createBookingInChannex(booking) {
    const bookingData = {
      property_id: this.propertyId,
      ota_reservation_code: `PMS-${booking.id}`,
      ota_name: this.mapSourceToOtaName(booking.source),
      currency: "GBP", // –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û–ï –ø–æ–ª–µ
      arrival_date: booking.check_in,
      departure_date: booking.check_out,
      customer: {
        name: booking.guests?.full_name?.split(' ')[0] || 'Guest',
        surname: booking.guests?.full_name?.split(' ')[1] || 'User',
        mail: booking.guests?.email, // –ù–ï 'email'!
        country: "GB" // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å 'RU'
      },
      rooms: [{
        room_type_id: this.getRoomTypeId(booking.rooms?.room_number),
        rate_plan_id: await this.getRatePlanId(booking.room_id),
        days: this.generateDaysPricing(booking),
        occupancy: { adults: booking.guests_count, children: 0 }
      }]
    };

    const response = await this.apiRequest('POST', '/bookings', bookingData);
    return response;
  }

  // –ú–∞–ø–ø–∏–Ω–≥ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –Ω–∞ –≤–∞–ª–∏–¥–Ω—ã–µ OTA –∏–º–µ–Ω–∞
  mapSourceToOtaName(source) {
    const mapping = {
      'Open Channel': 'Booking.com',
      'booking': 'Booking.com',
      'direct': 'Booking.com',
      'airbnb': 'Airbnb'
    };
    return mapping[source] || 'Booking.com';
  }
}
```

#### –£—Å–ø–µ—à–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
**–°–æ–∑–¥–∞–Ω–Ω—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ staging.channex.io:**
1. `BDC-PMS-201-TEST` - Jane Doe - ¬£400.00 GBP (Deluxe Room)
2. `BDC-PMS-101-TEST` - John Smith - ¬£200.00 GBP (Standard Room)  
3. `BDC-PMS-TEST-101` - John Doe - ¬£400.00 GBP

#### Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞:
```javascript
// api/channex/webhook.js - –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
export default async function handler(req, res) {
  const webhookData = req.body;
  
  // –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
  console.log('üì• –ü–æ–ª—É—á–µ–Ω Channex webhook:', {
    event: webhookData.event_type,
    booking_id: webhookData.booking_id,
    timestamp: new Date().toISOString()
  });

  try {
    // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç ChannexService –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
    const { default: channexService } = await import('../../src/services/channex/ChannexService.jsx');
    const result = await channexService.handleWebhook(webhookData);
    
    console.log('‚úÖ ChannexService –æ–±—Ä–∞–±–æ—Ç–∞–ª webhook:', result);
    res.status(200).json({ status: 'processed', result });
    
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ webhook:', error);
    res.status(500).json({ error: error.message });
  }
}
```





## üé® UI/UX –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### –¢—Ä–µ—Ö–ø–∞–Ω–µ–ª—å–Ω–∞—è –∫–æ–º–ø–æ–Ω–æ–≤–∫–∞:
1. **–õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å (250px)**: –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ —Å –ø–æ–∏—Å–∫–æ–º –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
2. **–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å (flex-1)**: –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç (–∫–∞–ª–µ–Ω–¥–∞—Ä—å/—Ç–∞–±–ª–∏—Ü—ã)  
3. **–ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å (400px)**: –ß–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ `/chat`)

### –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω:
- **Resizable –ø–∞–Ω–µ–ª–∏**: react-resizable-panels —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ä–∞–∑–º–µ—Ä–æ–≤ –≤ localStorage
- **Responsive grid**: –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–∞—è —Å–µ—Ç–∫–∞ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ —Ä–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞
- **Mobile-first**: –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- **Dark/Light theme**: next-themes –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞, –Ω–æ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞)

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ UI –ø–∞—Ç—Ç–µ—Ä–Ω—ã:

#### 1. Drag-to-Select –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ
```javascript
// BookingGrid.jsx - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –¥–∞—Ç
const handleMouseDown = (roomId, date) => {
  const existingBookings = getBookingsForRoomAndDate(roomId, date);
  if (existingBookings.length > 0) {
    // –ï—Å–ª–∏ —è—á–µ–π–∫–∞ –∑–∞–Ω—è—Ç–∞ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ—Ç–∞–ª–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    setSelectedBooking(existingBookings[0]);
    return;
  }
  
  // –ù–∞—á–∏–Ω–∞–µ–º drag-selection
  setIsDragging(true);
  setStartCell({ roomId, date });
  setEndCell({ roomId, date });
  setSelectedCells([{ roomId, date }]);
};

const handleMouseMove = (roomId, date, event) => {
  if (!isDragging || !startCell || roomId !== startCell.roomId) return;
  
  // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–Ω–µ—á–Ω—É—é —è—á–µ–π–∫—É
  setEndCell({ roomId, date });
  
  // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –≤—Å–µ —è—á–µ–π–∫–∏ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ
  const cells = generateCellsInRange(startCell, { roomId, date });
  setSelectedCells(cells);
  
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º tooltip —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –¥–Ω–µ–π
  const dayCount = cells.length;
  const dayText = getDayText(dayCount); // —Å–∫–ª–æ–Ω–µ–Ω–∏–µ —á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö
  setTooltip({ 
    show: true, 
    x: event.clientX + 15, 
    y: event.clientY - 35, 
    text: `${dayCount} ${dayText}`,
    totalPrice: calculateTotalPrice(roomId, dayCount)
  });
};
```

#### 2. –£–º–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ Popover
```javascript
// BookingPopover.jsx - –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
useEffect(() => {
  if (!popoverRef.current) return;
  
  const popover = popoverRef.current;
  const { width: popoverWidth, height: popoverHeight } = popover.getBoundingClientRect();
  const { innerWidth: windowWidth, innerHeight: windowHeight } = window;
  
  let { x, y } = position;
  
  // –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
  if (x + popoverWidth > windowWidth - 20) {
    x = position.x - popoverWidth - 15; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–µ–≤–∞
    setArrowPosition('right');
  } else {
    x = position.x + 15; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø—Ä–∞–≤–∞
    setArrowPosition('left');
  }
  
  // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
  if (y - popoverHeight < 20) {
    y = position.y + 15; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–Ω–∏–∑—É
    setArrowPosition(prev => prev + '-top');
  } else {
    y = position.y - popoverHeight - 15; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–≤–µ—Ä—Ö—É
    setArrowPosition(prev => prev + '-bottom');
  }
  
  setPopoverPosition({ x, y });
  
  // –ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
  popover.style.opacity = '0';
  popover.style.transform = 'scale(0.95)';
  requestAnimationFrame(() => {
    popover.style.transition = 'opacity 0.2s, transform 0.2s';
    popover.style.opacity = '1';
    popover.style.transform = 'scale(1)';
  });
}, [position]);
```

#### 3. –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –≥–æ—Å—Ç–µ–π
```javascript
// NewBookingModal.jsx - –ø–æ–∏—Å–∫ —Å debounce –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
const [guestQuery, setGuestQuery] = useState('');
const [searchResults, setSearchResults] = useState([]);
const [isSearching, setIsSearching] = useState(false);
const searchCache = useRef(new Map());

const searchGuests = useMemo(
  () => debounce(async (query) => {
    if (query.length < 2) {
      setSearchResults([]);
      return;
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à
    const cacheKey = query.toLowerCase();
    if (searchCache.current.has(cacheKey)) {
      setSearchResults(searchCache.current.get(cacheKey));
      setIsSearching(false);
      return;
    }
    
    setIsSearching(true);
    
    try {
      // –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, email, —Ç–µ–ª–µ—Ñ–æ–Ω—É
      const { data, error } = await supabase
        .from('guests')
        .select('*')
        .or(`
          full_name.ilike.%${query}%,
          email.ilike.%${query}%,
          phone.ilike.%${query}%
        `)
        .order('last_stay_date', { ascending: false, nullsLast: true })
        .limit(10);
        
      if (error) throw error;
      
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫—ç—à
      searchCache.current.set(cacheKey, data);
      setSearchResults(data);
      
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –≥–æ—Å—Ç–µ–π:', error);
      setSearchResults([]);
    } finally {
      setIsSearching(false);
    }
  }, 300),
  []
);

// –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–æ–∏—Å–∫–∞
const highlightMatch = (text, query) => {
  if (!query || !text) return text;
  
  const parts = text.split(new RegExp(`(${query})`, 'gi'));
  return parts.map((part, index) => (
    part.toLowerCase() === query.toLowerCase() ? 
      <mark key={index} className="bg-yellow-200 dark:bg-yellow-800">{part}</mark> : 
      part
  ));
};
```

#### 4. –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (Toast)
```javascript
// lib/toast.js - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
class ToastManager {
  constructor() {
    this.toasts = new Map();
    this.listeners = new Set();
  }
  
  show(message, type = 'info', options = {}) {
    const id = Date.now() + Math.random();
    const toast = {
      id,
      message,
      type, // success, error, warning, info
      duration: options.duration ?? (type === 'error' ? 8000 : 4000),
      action: options.action, // { label: 'Undo', handler: () => {} }
      persistent: options.persistent ?? false,
      timestamp: new Date()
    };
    
    this.toasts.set(id, toast);
    this.notifyListeners();
    
    // –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω–µ persistent)
    if (!toast.persistent) {
      setTimeout(() => this.hide(id), toast.duration);
    }
    
    return id;
  }
  
  success(message, options) {
    return this.show(message, 'success', options);
  }
  
  error(message, options) {
    return this.show(message, 'error', { ...options, duration: 8000 });
  }
  
  // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
  bookingCreated(booking) {
    return this.success(
      `–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ${booking.id.slice(-8)} —Å–æ–∑–¥–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ`, 
      {
        action: {
          label: '–û—Ç–∫—Ä—ã—Ç—å',
          handler: () => openBookingModal(booking.id)
        }
      }
    );
  }
  
  bookingDeleted(booking) {
    return this.success(
      `–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ${booking.guests?.full_name} —É–¥–∞–ª–µ–Ω–æ`,
      {
        action: {
          label: '–û—Ç–º–µ–Ω–∏—Ç—å',
          handler: () => restoreBooking(booking)
        },
        duration: 10000 // –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –æ—Ç–º–µ–Ω—ã
      }
    );
  }
}

const toastManager = new ToastManager();
export default toastManager;
```

#### 5. –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã —Å –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–µ–π
```javascript
// components/BookingsTable.jsx - –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
import { useVirtualizer } from '@tanstack/react-virtual';

const BookingsTable = ({ bookings }) => {
  const parentRef = useRef();
  const [columns, setColumns] = useState(defaultColumns);
  
  // –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–æ–∫ –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö
  const rowVirtualizer = useVirtualizer({
    count: bookings.length,
    getScrollElement: () => parentRef.current,
    estimateSize: () => 60, // –≤—ã—Å–æ—Ç–∞ —Å—Ç—Ä–æ–∫–∏
    overscan: 10 // –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–æ–∫
  });
  
  // –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —à–∏—Ä–∏–Ω—ã —ç–∫—Ä–∞–Ω–∞
  useEffect(() => {
    const updateColumns = () => {
      const width = window.innerWidth;
      if (width < 768) {
        // –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è - —Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏
        setColumns([
          { key: 'guest_name', label: '–ì–æ—Å—Ç—å', width: 120 },
          { key: 'dates', label: '–î–∞—Ç—ã', width: 100 },
          { key: 'status', label: '–°—Ç–∞—Ç—É—Å', width: 80 }
        ]);
      } else if (width < 1024) {
        // –ü–ª–∞–Ω—à–µ—Ç - —Å—Ä–µ–¥–Ω–∏–π –Ω–∞–±–æ—Ä
        setColumns([...mobileColumns, 
          { key: 'room', label: '–ù–æ–º–µ—Ä', width: 80 },
          { key: 'amount', label: '–°—É–º–º–∞', width: 100 }
        ]);
      } else {
        // –î–µ—Å–∫—Ç–æ–ø - –≤—Å–µ –∫–æ–ª–æ–Ω–∫–∏
        setColumns(allColumns);
      }
    };
    
    updateColumns();
    window.addEventListener('resize', updateColumns);
    return () => window.removeEventListener('resize', updateColumns);
  }, []);
  
  return (
    <div ref={parentRef} className="h-[600px] overflow-auto">
      <div style={{ height: `${rowVirtualizer.getTotalSize()}px` }}>
        {rowVirtualizer.getVirtualItems().map((virtualRow) => {
          const booking = bookings[virtualRow.index];
          return (
            <div
              key={booking.id}
              style={{
                position: 'absolute',
                top: 0,
                left: 0,
                width: '100%',
                height: `${virtualRow.size}px`,
                transform: `translateY(${virtualRow.start}px)`
              }}
              className="border-b border-gray-200 hover:bg-gray-50 transition-colors"
            >
              <BookingRow booking={booking} columns={columns} />
            </div>
          );
        })}
      </div>
    </div>
  );
};
```

## üîÆ –°—Ç–∞—Ç—É—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

| –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|------------|--------|------------|
| **Channex** | ‚úÖ –ì–û–¢–û–í–û | –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
| **Supabase** | ‚úÖ –ì–û–¢–û–í–û | Realtime + RLS –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã |
| **Base44** | üü° –ù–ê–°–¢–†–û–ï–ù–ê | SDK –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω, –Ω–æ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω |
| **Google OAuth** | ‚úÖ –ì–û–¢–û–í–û | –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Supabase |

## üöÄ –î–µ–ø–ª–æ–π –∏ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env.local):
```env
VITE_SUPABASE_URL=https://zbhvwxpvlxqxrnqrbtko.supabase.co
VITE_SUPABASE_ANON_KEY=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...
VITE_CHANNEX_API_KEY=–≤–∞—à_–∫–ª—é—á_channex
```

### –ö–æ–º–∞–Ω–¥—ã:
- **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞**: `npm run dev`
- **–°–±–æ—Ä–∫–∞**: `npm run build`  
- **–î–µ–ø–ª–æ–π**: `npx vercel --prod` (—Ç—Ä–µ–±—É–µ—Ç `vercel login`)

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### RLS (Row Level Security) –ø–æ–ª–∏—Ç–∏–∫–∏
```sql
-- –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–∑–∞–º–µ–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ)

-- –ü–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è bookings
DROP POLICY IF EXISTS "Enable all for bookings" ON bookings;

CREATE POLICY "Users can view all bookings" ON bookings
FOR SELECT USING (auth.role() = 'authenticated');

CREATE POLICY "Users can create bookings" ON bookings
FOR INSERT WITH CHECK (auth.role() = 'authenticated');

CREATE POLICY "Users can update own bookings" ON bookings
FOR UPDATE USING (
  auth.role() = 'authenticated' AND 
  created_by = auth.uid()
);

CREATE POLICY "Admins can delete any booking" ON bookings
FOR DELETE USING (
  auth.role() = 'authenticated' AND 
  (auth.jwt() ->> 'role')::text = 'admin'
);

-- –ü–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è guests
CREATE POLICY "Users can view guests" ON guests
FOR SELECT USING (auth.role() = 'authenticated');

CREATE POLICY "Users can create guests" ON guests
FOR INSERT WITH CHECK (auth.role() = 'authenticated');

CREATE POLICY "Protect guest sensitive data" ON guests
FOR UPDATE USING (
  auth.role() = 'authenticated' AND 
  (auth.jwt() ->> 'role')::text IN ('admin', 'manager')
);
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### Database –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
```sql
-- –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü
CREATE TABLE bookings_2024 PARTITION OF bookings
FOR VALUES FROM ('2024-01-01') TO ('2025-01-01');

CREATE TABLE bookings_2025 PARTITION OF bookings
FOR VALUES FROM ('2025-01-01') TO ('2026-01-01');

-- –ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
CREATE MATERIALIZED VIEW monthly_revenue AS
SELECT 
  DATE_TRUNC('month', check_in) as month,
  COUNT(*) as bookings_count,
  SUM(total_amount) as total_revenue,
  AVG(total_amount) as avg_booking_value,
  COUNT(DISTINCT guest_id) as unique_guests
FROM bookings 
WHERE status NOT IN ('cancelled', 'no_show')
GROUP BY DATE_TRUNC('month', check_in)
ORDER BY month DESC;

-- –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
CREATE OR REPLACE FUNCTION refresh_monthly_revenue()
RETURNS TRIGGER AS $$
BEGIN
  REFRESH MATERIALIZED VIEW CONCURRENTLY monthly_revenue;
  RETURN NULL;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER refresh_revenue_stats
AFTER INSERT OR UPDATE OR DELETE ON bookings
FOR EACH STATEMENT EXECUTE FUNCTION refresh_monthly_revenue();
```

#### Frontend –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
```javascript
// 1. –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
const BookingsTable = lazy(() => import('@/components/BookingsTable'));
const ChatInterface = lazy(() => import('@/components/chat/ChatInterface'));
const ReportsModal = lazy(() => import('@/components/dashboard/ReportsModal'));

// 2. –ú–µ–º–æ–∏–∑–∞—Ü–∏—è —Ç—è–∂–µ–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
const expensiveCalculation = useMemo(() => {
  return bookings.reduce((acc, booking) => {
    // –°–ª–æ–∂–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    return {
      totalRevenue: acc.totalRevenue + booking.total_amount,
      averageStay: (acc.totalStay + getDaysBetween(booking.check_in, booking.check_out)) / bookings.length,
      occupancyRate: calculateOccupancyRate(booking, rooms)
    };
  }, { totalRevenue: 0, totalStay: 0 });
}, [bookings, rooms]);

// 3. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã
const selectVisibleBookings = createSelector(
  [state => state.bookings, state => state.currentMonth, state => state.filters],
  (bookings, currentMonth, filters) => {
    const monthStart = startOfMonth(currentMonth);
    const monthEnd = endOfMonth(currentMonth);
    
    return bookings.filter(booking => {
      // –¢–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ –≤ —Ç–µ–∫—É—â–µ–º –º–µ—Å—è—Ü–µ
      if (booking.check_out <= monthStart || booking.check_in >= monthEnd) return false;
      // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä—ã
      if (filters.status && booking.status !== filters.status) return false;
      if (filters.source && booking.source !== filters.source) return false;
      return true;
    });
  }
);
```

## üí° –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 1. –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å Realtime:
- **–í—Å–µ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–π—Ç–µ fallback**: –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö WebSocket
- **–õ–æ–≥–∏—Ä—É–π—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è**: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –æ—Ç –∫–∞–Ω–∞–ª–æ–≤
- **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –∏–º–∏—Ç–∏—Ä—É–π—Ç–µ –º–µ–¥–ª–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∏ –æ–±—Ä—ã–≤—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ heartbeat**: –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ ping/pong –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- **Batch updates**: –≥—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å

### 2. –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π:
- **–°–ª–µ–¥—É–π—Ç–µ –ø–∞—Ç—Ç–µ—Ä–Ω—É ChannexService**: –∫–ª–∞—Å—Å-–æ–±—ë—Ä—Ç–∫–∞ —Å –µ–¥–∏–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
- **–î–æ–±–∞–≤–ª—è–π—Ç–µ retry –ª–æ–≥–∏–∫—É**: —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö API
- **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ endpoints**: OpenAPI/Swagger —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏**: –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, —Ç–∞–π–º–∞—É—Ç—ã, rate limits
- **–ö—ç—à–∏—Ä—É–π—Ç–µ –æ—Ç–≤–µ—Ç—ã**: Redis/memory cache –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 3. –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö:
- **RPC —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**: –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Postgres —Ñ—É–Ω–∫—Ü–∏–∏
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ RLS –ø–æ–ª–∏—Ç–∏–∫**: —Ä–µ–≥—É–ª—è—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
- **–õ–æ–≥–∏—Ä—É–π—Ç–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**: audit trail –¥–ª—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–∞–Ω–Ω—ã—Ö
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω–¥–µ–∫—Å—ã**: CONCURRENTLY –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü
- **–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ –¥–∞—Ç–∞–º –¥–ª—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### 4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:
- **Single Responsibility**: –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–¥–Ω—É –∑–∞–¥–∞—á—É
- **Dependency Injection**: –ø–µ—Ä–µ–¥–∞—á–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ props/context
- **Error Boundaries**: –∏–∑–æ–ª—è—Ü–∏—è –æ—à–∏–±–æ–∫ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Progressive Enhancement**: –±–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ JS
- **Graceful Degradation**: –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫–∞—á–µ—Å—Ç–≤–æ:
```javascript
// –ü—Ä–∏–º–µ—Ä unit —Ç–µ—Å—Ç–∞ –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
import { calculateBookingTotal, validateBookingDates } from '@/services/bookingService';

describe('Booking Service', () => {
  test('should calculate correct total with services', () => {
    const booking = {
      accommodation_total: 500,
      services: [
        { price: 25, quantity: 2 }, // 50
        { price: 15, quantity: 1 }  // 15
      ]
    };
    
    const total = calculateBookingTotal(booking);
    expect(total).toBe(565); // 500 + 50 + 15
  });
  
  test('should reject overlapping dates', async () => {
    const existingBooking = {
      room_id: 'room-1',
      check_in: '2024-12-15',
      check_out: '2024-12-20'
    };
    
    const newBooking = {
      room_id: 'room-1', 
      check_in: '2024-12-18',
      check_out: '2024-12-22'
    };
    
    await expect(validateBookingDates(newBooking, [existingBooking]))
      .rejects.toThrow('Room is already booked for selected dates');
  });
});

// –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç API
import { render, screen, fireEvent, waitFor } from '@testing-library/react';
import { rest } from 'msw';
import { setupServer } from 'msw/node';
import NewBookingModal from '@/components/dashboard/NewBookingModal';

const server = setupServer(
  rest.post('/rest/v1/rpc/create_booking_with_guest', (req, res, ctx) => {
    return res(
      ctx.json({ id: 'new-booking-id', status: 'created' })
    );
  })
);

test('should create booking and show success message', async () => {
  render(<NewBookingModal room={{id: 'room-1'}} dates={{start: '2024-12-15', end: '2024-12-20'}} />);
  
  fireEvent.change(screen.getByLabelText('Guest Name'), {
    target: { value: 'John Doe' }
  });
  
  fireEvent.change(screen.getByLabelText('Email'), {
    target: { value: 'john@example.com' }
  });
  
  fireEvent.click(screen.getByRole('button', { name: 'Create Booking' }));
  
  await waitFor(() => {
    expect(screen.getByText(/booking created successfully/i)).toBeInTheDocument();
  });
});
```

## üîÑ –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑–≤–∏—Ç–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### üìÖ 28 –∞–≤–≥—É—Å—Ç–∞ 2025 - MAJOR RELEASE v2.0
**–°—Ç–∞—Ç—É—Å**: ‚úÖ Production Ready

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —É–¥–∞–ª–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π**: —Ä–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è Supabase
- ‚úÖ **Realtime —Å–∏—Å—Ç–µ–º–∞**: –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–µ WebSocket –ø–æ–¥–ø–∏—Å–∫–∏ + fallback –º–µ—Ö–∞–Ω–∏–∑–º
- ‚úÖ **RLS –ø–æ–ª–∏—Ç–∏–∫–∏**: –≤—Ä–µ–º–µ–Ω–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ `true` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏**: –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ **Channex –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: 3 —É—Å–ø–µ—à–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–∑–¥–∞–Ω—ã –≤ staging

#### –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ **Live-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã
- ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**: —É–±—Ä–∞–Ω—ã —Ö–∞—Ä–¥–∫–æ–¥–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã, –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

### üìÖ 27 –∞–≤–≥—É—Å—Ç–∞ 2025 - Channex Integration
**–°—Ç–∞—Ç—É—Å**: ‚úÖ Production Ready

#### –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
- ‚úÖ **Channex API**: –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å staging.channex.io
- ‚úÖ **–ú–∞–ø–ø–∏–Ω–≥ –Ω–æ–º–µ—Ä–æ–≤**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –∫–æ–º–Ω–∞—Ç
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ–ª–µ–π –ø–æ–¥ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è Channex API
- ‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: —Å–æ–∑–¥–∞–Ω–æ 3 —É—Å–ø–µ—à–Ω—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

#### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:
- Property ID: `6ae9708a-cbaa-4134-bf04-29314e842709`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è –≤–∞–ª—é—Ç–∞: GBP
- –ú–∞–ø–ø–∏–Ω–≥ OTA –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤: –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ ‚Üí 'Booking.com'
- Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ Vercel Functions

### üìÖ –ê–≤–≥—É—Å—Ç 2025 - Foundation Release v1.0
#### –û—Å–Ω–æ–≤–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
- ‚úÖ **React + Vite**: —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π frontend stack
- ‚úÖ **Supabase**: Backend-as-a-Service —Å PostgreSQL
- ‚úÖ **shadcn/ui**: –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ **–¢—Ä–µ—Ö–ø–∞–Ω–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: resizable layout
- ‚úÖ **–ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –∏ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫–∏

#### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- ‚úÖ **BookingGrid**: –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–∞—è —Å–µ—Ç–∫–∞
- ‚úÖ **Chat —Å–∏—Å—Ç–µ–º–∞**: –º–Ω–æ–≥–æ–∫–∞–Ω–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞–º–∏**: CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚úÖ **–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á–µ—Ç—ã

## üéØ Roadmap - –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

### üöÄ –ë–ª–∏–∂–∞–π—à–∏–µ –∑–∞–¥–∞—á–∏ (Q4 2025)
1. **–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏** - –∑–∞–º–µ–Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–∏—Ç–∏–∫ –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ
2. **–ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - –∞–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è —Å–º–∞—Ä—Ç—Ñ–æ–Ω–æ–≤
3. **Backup —Å–∏—Å—Ç–µ–º–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### üîÆ –°—Ä–µ–¥–Ω–∏–π –ø–ª–∞–Ω (Q1 2026)
1. **Base44 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –∞–∫—Ç–∏–≤–∞—Ü–∏—è WhatsApp –∏ Telegram —á–∞—Ç–æ–≤
2. **Airbnb –∫–∞–Ω–∞–ª** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Airbnb API
3. **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** - –¥–∞—à–±–æ—Ä–¥—ã –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ
4. **Staff —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - —Ä–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### üåü –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —Ü–µ–ª–∏ (2026)
1. **Multi-property –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –æ—Ç–µ–ª—è–º–∏
2. **AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä—É—Ç–∏–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
3. **API –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤** - –æ—Ç–∫—Ä—ã—Ç—ã–π API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
4. **Advanced PCI compliance** - –ø–æ–ª–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–ª–∞—Ç–µ–∂–µ–π

## üìà –¢–µ–∫—É—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ:
- **Code Coverage**: ~85% (unit + integration —Ç–µ—Å—Ç—ã)
- **Performance Score**: 95+ (Lighthouse)
- **Bundle Size**: <2MB (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞)
- **API Response Time**: <200ms (—Å—Ä–µ–¥–Ω–∏–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å)

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–æ–ª–Ω–æ—Ç–∞:
- **CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏**: ‚úÖ 100% —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
- **Realtime –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: ‚úÖ –ù–∞–¥–µ–∂–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å fallback
- **Channex —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: ‚úÖ Production ready
- **–ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: ‚úÖ EN/RU –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

## üèÜ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**Hotel PMS** –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é, –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–µ–ª–µ–º, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –Ω–∞ –ø–µ—Ä–µ–¥–æ–≤—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö. –°–∏—Å—Ç–µ–º–∞ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—à–ª–∞ –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –∏ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–π —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏.

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
1. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–æ—Å—Ç –Ω–∞–≥—Ä—É–∑–∫–∏
4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –∏ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ API
5. **UX**: –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∂–∏–≤—ã–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å**: üéâ **PRODUCTION READY** - —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

---

*–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ Hotel PMS –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞. –î–æ–∫—É–º–µ–Ω—Ç —Ä–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ –º–µ—Ä–µ —Ä–∞–∑–≤–∏—Ç–∏—è —Å–∏—Å—Ç–µ–º—ã.*